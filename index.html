<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Essentials - Quiz Q/A</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --bg: #0f172a;
            --bg-card: #1e293b;
            --bg-code: #0d1117;
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --border: #334155;
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary), #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        header p {
            color: var(--text-muted);
            font-size: 1rem;
        }

        /* Mode Switcher */
        .mode-switcher {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .mode-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--border);
            background: var(--bg-card);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .mode-btn:hover {
            border-color: var(--primary);
        }

        .mode-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Flashcard Mode */
        .flashcard-container {
            display: none;
        }

        .flashcard-container.active {
            display: block;
        }

        .flashcard-controls {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-btn:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .flashcard-progress {
            text-align: center;
            margin-bottom: 1rem;
            color: var(--text-muted);
        }

        .progress-bar-flashcard {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            margin: 0.5rem auto;
            max-width: 300px;
            overflow: hidden;
        }

        .progress-bar-flashcard .fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #a855f7);
            transition: width 0.3s;
        }

        .flashcard {
            background: var(--bg-card);
            border-radius: 16px;
            border: 2px solid var(--border);
            min-height: 400px;
            display: flex;
            flex-direction: column;
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: border-color 0.3s;
        }

        .flashcard:hover {
            border-color: var(--primary);
        }

        .flashcard-category {
            padding: 0.75rem 1.5rem;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .flashcard-question {
            padding: 2rem 1.5rem;
            font-size: 1.15rem;
            font-weight: 600;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .flashcard-answer {
            padding: 1.5rem;
            background: var(--bg);
            border-top: 1px solid var(--border);
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .flashcard-answer.visible {
            display: block;
        }

        .flashcard-answer p {
            margin: 0.75rem 0;
        }

        .flashcard-answer strong {
            color: var(--primary);
        }

        .flashcard-answer ul, .flashcard-answer ol {
            margin: 0.75rem 0;
            padding-left: 1.5rem;
        }

        .flashcard-answer li {
            margin: 0.4rem 0;
        }

        .flashcard-answer pre {
            background: var(--bg-code);
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 0.75rem 0;
            border: 1px solid var(--border);
            font-size: 0.85rem;
        }

        .flashcard-answer code {
            font-family: 'Fira Code', 'Consolas', monospace;
            color: #7dd3fc;
        }

        .flashcard-answer p code {
            background: var(--bg-code);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.85em;
        }

        .flashcard-answer table {
            width: 100%;
            border-collapse: collapse;
            margin: 0.75rem 0;
            font-size: 0.9rem;
        }

        .flashcard-answer th, .flashcard-answer td {
            padding: 0.5rem;
            text-align: left;
            border: 1px solid var(--border);
        }

        .flashcard-answer th {
            background: var(--bg-card);
            color: var(--primary);
            font-weight: 600;
        }

        .flashcard-answer blockquote {
            border-left: 3px solid var(--primary);
            padding-left: 1rem;
            margin: 0.75rem 0;
            color: var(--text-muted);
            font-style: italic;
        }

        .flashcard-answer .alert {
            background: rgba(245, 158, 11, 0.1);
            border-left: 3px solid var(--warning);
            padding: 0.75rem;
            border-radius: 0 6px 6px 0;
            margin: 0.75rem 0;
        }

        .flashcard-answer .alert-title {
            color: var(--warning);
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .reveal-btn {
            display: block;
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .reveal-btn:hover {
            opacity: 0.9;
        }

        .reveal-btn.hidden {
            display: none;
        }

        .flashcard-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .nav-btn {
            padding: 0.75rem 2rem;
            border: 2px solid var(--border);
            background: var(--bg-card);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .feedback-btns {
            display: none;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .feedback-btns.visible {
            display: flex;
        }

        .feedback-btn {
            padding: 0.75rem 2rem;
            border: 2px solid;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feedback-btn.knew {
            border-color: var(--success);
            color: var(--success);
        }

        .feedback-btn.knew:hover {
            background: var(--success);
            color: white;
        }

        .feedback-btn.didnt-know {
            border-color: var(--danger);
            color: var(--danger);
        }

        .feedback-btn.didnt-know:hover {
            background: var(--danger);
            color: white;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--bg-card);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .stat-value.correct {
            color: var(--success);
        }

        .stat-value.incorrect {
            color: var(--danger);
        }

        .stat-value.remaining {
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Completion Screen */
        .completion-screen {
            display: none;
            text-align: center;
            padding: 3rem 1.5rem;
            background: var(--bg-card);
            border-radius: 16px;
            border: 2px solid var(--success);
        }

        .completion-screen.visible {
            display: block;
        }

        .completion-screen h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--success);
        }

        .completion-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 2rem 0;
        }

        .completion-stat {
            text-align: center;
        }

        .completion-stat-value {
            font-size: 3rem;
            font-weight: 700;
        }

        .completion-stat-label {
            color: var(--text-muted);
        }

        .restart-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
        }

        .restart-btn:hover {
            opacity: 0.9;
        }

        /* List Mode */
        .list-container {
            display: none;
        }

        .list-container.active {
            display: block;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .question-card {
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 1.25rem;
            border: 1px solid var(--border);
            overflow: hidden;
            transition: border-color 0.2s;
        }

        .question-card:hover {
            border-color: var(--primary);
        }

        .question-header {
            padding: 1.25rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .question-header:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .question-title {
            font-weight: 600;
            font-size: 1.05rem;
            padding-right: 1rem;
        }

        .toggle-icon {
            font-size: 1.5rem;
            color: var(--primary);
            transition: transform 0.3s;
            flex-shrink: 0;
        }

        .question-card.open .toggle-icon {
            transform: rotate(45deg);
        }

        .answer {
            display: none;
            padding: 0 1.5rem 1.5rem;
            border-top: 1px solid var(--border);
        }

        .question-card.open .answer {
            display: block;
        }

        .answer p {
            margin: 1rem 0;
        }

        .answer strong {
            color: var(--primary);
        }

        .answer ul, .answer ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .answer li {
            margin: 0.5rem 0;
        }

        pre {
            background: var(--bg-code);
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
            border: 1px solid var(--border);
            font-size: 0.9rem;
        }

        code {
            font-family: 'Fira Code', 'Consolas', monospace;
            color: #7dd3fc;
        }

        p code {
            background: var(--bg-code);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.9em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.95rem;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border);
        }

        th {
            background: var(--bg);
            color: var(--primary);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: rgba(0, 0, 0, 0.2);
        }

        .alert {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--warning);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .alert-title {
            color: var(--warning);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-muted);
            font-style: italic;
        }

        .cheatsheet {
            margin-top: 2rem;
        }

        .cheatsheet summary {
            cursor: pointer;
            padding: 1rem;
            background: var(--bg-card);
            border-radius: 8px;
            font-weight: 600;
            color: var(--primary);
            border: 1px solid var(--border);
        }

        .cheatsheet summary:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .cheatsheet-content {
            padding: 1.5rem;
            background: var(--bg-card);
            border-radius: 0 0 8px 8px;
            border: 1px solid var(--border);
            border-top: none;
            margin-top: -4px;
        }

        .cheatsheet-content h4 {
            color: var(--primary);
            margin: 1.5rem 0 0.75rem;
        }

        .cheatsheet-content h4:first-child {
            margin-top: 0;
        }

        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
        }

        /* Keyboard shortcuts hint */
        .shortcuts-hint {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 1rem;
        }

        .shortcuts-hint kbd {
            background: var(--bg-card);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border);
            font-family: inherit;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.75rem;
            }

            .flashcard-question {
                font-size: 1rem;
                padding: 1.5rem 1rem;
            }

            .flashcard-nav {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                justify-content: center;
            }

            .feedback-btns {
                flex-direction: column;
            }

            .feedback-btn {
                width: 100%;
                justify-content: center;
            }

            .stats-bar {
                gap: 1rem;
            }

            .stat-value {
                font-size: 1.2rem;
            }

            .shortcuts-hint {
                display: none;
            }

            .completion-stats {
                flex-direction: column;
                gap: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Network Essentials - Quiz Q/A</h1>
            <p>Conceitos de networking essenciais para System Design Interviews</p>
        </header>

        <!-- Mode Switcher -->
        <div class="mode-switcher">
            <button class="mode-btn active" data-mode="flashcard">Flashcards</button>
            <button class="mode-btn" data-mode="list">Lista Completa</button>
        </div>

        <!-- Flashcard Mode -->
        <div class="flashcard-container active" id="flashcardMode">
            <div class="flashcard-controls">
                <button class="control-btn" id="shuffleBtn">
                    <span>üîÄ</span> Embaralhar
                </button>
                <button class="control-btn" id="resetBtn">
                    <span>üîÑ</span> Reiniciar
                </button>
                <button class="control-btn" id="filterBtn">
                    <span>üìã</span> <span id="filterText">Todas (21)</span>
                </button>
            </div>

            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-value correct" id="correctCount">0</div>
                    <div class="stat-label">Acertei</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value incorrect" id="incorrectCount">0</div>
                    <div class="stat-label">Revisar</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value remaining" id="remainingCount">21</div>
                    <div class="stat-label">Restantes</div>
                </div>
            </div>

            <div class="flashcard-progress">
                <span id="currentIndex">1</span> / <span id="totalCards">21</span>
                <div class="progress-bar-flashcard">
                    <div class="fill" id="progressFillFlashcard"></div>
                </div>
            </div>

            <div class="flashcard" id="flashcard">
                <div class="flashcard-category" id="cardCategory">Categoria</div>
                <div class="flashcard-question" id="cardQuestion">Pergunta</div>
                <button class="reveal-btn" id="revealBtn">Mostrar Resposta</button>
                <div class="flashcard-answer" id="cardAnswer">Resposta</div>
            </div>

            <div class="feedback-btns" id="feedbackBtns">
                <button class="feedback-btn knew" id="knewBtn">
                    <span>‚úì</span> Sabia
                </button>
                <button class="feedback-btn didnt-know" id="didntKnowBtn">
                    <span>‚úó</span> N√£o Sabia
                </button>
            </div>

            <div class="flashcard-nav">
                <button class="nav-btn" id="prevBtn">
                    <span>‚Üê</span> Anterior
                </button>
                <button class="nav-btn" id="nextBtn">
                    Pr√≥xima <span>‚Üí</span>
                </button>
            </div>

            <div class="shortcuts-hint">
                Atalhos: <kbd>Espa√ßo</kbd> revelar | <kbd>‚Üê</kbd><kbd>‚Üí</kbd> navegar | <kbd>1</kbd> sabia | <kbd>2</kbd> n√£o sabia
            </div>

            <div class="completion-screen" id="completionScreen">
                <h2>Parab√©ns! Quiz Completo!</h2>
                <p>Voc√™ revisou todas as perguntas.</p>
                <div class="completion-stats">
                    <div class="completion-stat">
                        <div class="completion-stat-value correct" id="finalCorrect">0</div>
                        <div class="completion-stat-label">Acertei</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-stat-value incorrect" id="finalIncorrect">0</div>
                        <div class="completion-stat-label">Para Revisar</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-stat-value" id="finalPercentage" style="color: var(--primary)">0%</div>
                        <div class="completion-stat-label">Aproveitamento</div>
                    </div>
                </div>
                <button class="restart-btn" id="restartBtn">Revisar Novamente</button>
                <button class="restart-btn" id="reviewMissedBtn" style="background: var(--danger); margin-left: 0.5rem;">Revisar Erradas</button>
            </div>
        </div>

        <!-- List Mode -->
        <div class="list-container" id="listMode">
            <!-- Camadas de Rede e Modelo OSI -->
            <section class="section">
                <h2 class="section-title">üì° Camadas de Rede e Modelo OSI</h2>

                <div class="question-card">
                    <div class="question-header">
                        <span class="question-title">Q1: Por que o modelo de camadas √© t√£o importante para desenvolvedores de aplica√ß√µes?</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="answer">
                        <p>O modelo de camadas funciona como uma <strong>abstra√ß√£o</strong> que simplifica drasticamente nosso trabalho. Cada camada esconde a complexidade das camadas inferiores, permitindo que:</p>
                        <ul>
                            <li>Voc√™ n√£o precise saber quais voltagens representam 1 ou 0 no cabo de rede</li>
                            <li>Possa usar apenas a camada imediatamente abaixo (como usar <code>open()</code> sem instruir o disco manualmente)</li>
                            <li>Foque apenas no que √© relevante para sua aplica√ß√£o</li>
                        </ul>
                        <p>√â como usar uma API de alto n√≠vel: voc√™ chama <code>fetch()</code> e n√£o precisa implementar TCP handshakes manualmente.</p>
                    </div>
                </div>

                <div class="question-card">
                    <div class="question-header">
                        <span class="question-title">Q2: Quais s√£o as 3 camadas mais importantes para System Design Interviews e qual √© a responsabilidade de cada uma?</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="answer">
                        <table>
                            <thead>
                                <tr>
                                    <th>Camada</th>
                                    <th>Protocolo Principal</th>
                                    <th>Responsabilidade</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Layer 3 (Network)</strong></td>
                                    <td>IP</td>
                                    <td>Roteamento, endere√ßamento, quebra em pacotes, entrega "best-effort"</td>
                                </tr>
                                <tr>
                                    <td><strong>Layer 4 (Transport)</strong></td>
                                    <td>TCP, UDP, QUIC</td>
                                    <td>Comunica√ß√£o end-to-end, confiabilidade, ordena√ß√£o, controle de fluxo</td>
                                </tr>
                                <tr>
                                    <td><strong>Layer 7 (Application)</strong></td>
                                    <td>HTTP, DNS, WebSockets</td>
                                    <td>Protocolos de aplica√ß√£o que abstraem comunica√ß√£o para tipos espec√≠ficos de dados</td>
                                </tr>
                            </tbody>
                        </table>
                        <p>A Layer 3 garante que os pacotes cheguem ao destino, Layer 4 adiciona garantias sobre <em>como</em> chegam, e Layer 7 define <em>o que</em> est√° sendo comunicado.</p>
                    </div>
                </div>
            </section>

            <!-- Protocolos de Transporte -->
            <section class="section">
                <h2 class="section-title">üîå Protocolos de Transporte: TCP vs UDP</h2>

                <div class="question-card">
                    <div class="question-header">
                        <span class="question-title">Q3: Uma empresa de streaming de jogos est√° decidindo entre TCP e UDP. Qual protocolo voc√™ recomendaria e por que?</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="answer">
                        <p><strong>UDP √© a escolha correta</strong> para streaming de v√≠deo em tempo real. Raz√µes:</p>
                        <ol>
                            <li><strong>Lat√™ncia √© cr√≠tica</strong> - Em jogos, milissegundos importam</li>
                            <li><strong>Perda de pacotes √© aceit√°vel</strong> - Um frame perdido √© menos problem√°tico que atraso</li>
                            <li><strong>Sem overhead de handshake</strong> - Conex√£o mais r√°pida</li>
                            <li><strong>Sem retransmiss√£o</strong> - N√£o faz sentido retransmitir um frame de 2 segundos atras</li>
                        </ol>
                        <div class="alert">
                            <div class="alert-title">‚ö†Ô∏è Cuidado</div>
                            <p>Se a aplica√ß√£o tamb√©m tiver usuarios web (browser), WebRTC seria necess√°rio pois browsers n√£o suportam UDP diretamente exceto via WebRTC.</p>
                        </div>
                    </div>
                </div>

                <div class="question-card">
                    <div class="question-header">
                        <span class="question-title">Q4: O que significa dizer que TCP √© "connection-oriented" e por que isso importa?</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="answer">
                        <p>"Connection-oriented" significa que TCP estabelece uma <strong>conex√£o dedicada</strong> antes de transferir dados atrav√©s do three-way handshake:</p>
                        <pre><code>1. SYN     ‚Üí Cliente solicita conex√£o
2. SYN-ACK ‚Üí Servidor reconhece e aceita
3. ACK     ‚Üí Cliente confirma estabelecimento</code></pre>
                        <p><strong>Por que importa:</strong></p>
                        <ul>
                            <li><strong>Ordena√ß√£o garantida</strong>: Mensagens chegam em ordem</li>
                            <li><strong>Confiabilidade</strong>: Receptor confirma recebimento (ACK)</li>
                            <li><strong>Estado mantido</strong>: Servidor e cliente "sabem" um do outro</li>
                            <li><strong>Controle de fluxo</strong>: Evita sobrecarregar o receptor</li>
                        </ul>
                    </div>
                </div>

                <div class="question-card">
                    <div class="question-header">
                        <span class="question-title">Q5: Complete a tabela comparativa TCP vs UDP</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="answer">
                        <table>
                            <thead>
                                <tr><th>Feature</th><th>UDP</th><th>TCP</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Conex√£o</td><td>Connectionless</td><td>Connection-oriented</td></tr>
                                <tr><td>Confiabilidade</td><td>Best-effort</td><td>Entrega garantida</td></tr>
                                <tr><td>Ordena√ß√£o</td><td>Sem garantia</td><td>Mant√©m ordem</td></tr>
                                <tr><td>Header Size</td><td>8 bytes</td><td>20-60 bytes</td></tr>
                                <tr><td>Use Cases</td><td>Streaming, gaming, VoIP</td><td>Web, APIs</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- More sections... -->
            <section class="section">
                <h2 class="section-title">üåê Protocolos de Aplica√ß√£o</h2>

                <div class="question-card">
                    <div class="question-header">
                        <span class="question-title">Q6: Por que HTTP √© considerado "stateless"?</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="answer">
                        <p><strong>Stateless significa</strong>: Cada requisi√ß√£o √© independente.</p>
                        <p><strong>Por que √© bom:</strong></p>
                        <ol>
                            <li><strong>Escalabilidade horizontal</strong> - Qualquer servidor pode responder</li>
                            <li><strong>Simplicidade</strong> - Servidores como fun√ß√µes puras</li>
                            <li><strong>Resili√™ncia</strong> - Se um servidor cair, outro assume</li>
                            <li><strong>Load balancing f√°cilitado</strong></li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- Cheat Sheet -->
            <section class="section">
                <h2 class="section-title">üìã Cheat Sheet</h2>
                <details class="cheatsheet">
                    <summary>Ver Cheat Sheet Completo</summary>
                    <div class="cheatsheet-content">
                        <h4>Protocolos de Transporte:</h4>
                        <table>
                            <thead><tr><th>Cen√°rio</th><th>Escolha</th></tr></thead>
                            <tbody>
                                <tr><td>Default para tudo</td><td>TCP</td></tr>
                                <tr><td>Gaming/Streaming</td><td>UDP</td></tr>
                                <tr><td>Browsers + tempo real</td><td>WebRTC</td></tr>
                            </tbody>
                        </table>
                        <h4>APIs:</h4>
                        <table>
                            <thead><tr><th>Cen√°rio</th><th>Escolha</th></tr></thead>
                            <tbody>
                                <tr><td>API p√∫blica</td><td>REST</td></tr>
                                <tr><td>Frontend flex√≠vel</td><td>GraphQL</td></tr>
                                <tr><td>Microservicos internos</td><td>gRPC</td></tr>
                                <tr><td>Push notifications</td><td>SSE</td></tr>
                                <tr><td>Chat bidirectional</td><td>WebSockets</td></tr>
                            </tbody>
                        </table>
                    </div>
                </details>
            </section>

            <footer>
                <p>Quiz criado com base no conte√∫do de Network Essentials para System Design Interviews</p>
            </footer>
        </div>
    </div>

    <script>
        // Quiz Data
        const quizData = [
            {
                category: "üì° Camadas de Rede e Modelo OSI",
                question: "Q1: Por que o modelo de camadas √© t√£o importante para desenvolvedores de aplica√ß√µes?",
                answer: `<p>O modelo de camadas funciona como uma <strong>abstra√ß√£o</strong> que simplifica drasticamente nosso trabalho. Cada camada esconde a complexidade das camadas inferiores, permitindo que:</p>
                <ul>
                    <li>Voc√™ n√£o precise saber quais voltagens representam 1 ou 0 no cabo de rede</li>
                    <li>Possa usar apenas a camada imediatamente abaixo (como usar <code>open()</code> sem instruir o disco manualmente)</li>
                    <li>Foque apenas no que √© relevante para sua aplica√ß√£o</li>
                </ul>
                <p>√â como usar uma API de alto n√≠vel: voc√™ chama <code>fetch()</code> e n√£o precisa implementar TCP handshakes manualmente.</p>`
            },
            {
                category: "üì° Camadas de Rede e Modelo OSI",
                question: "Q2: Quais s√£o as 3 camadas mais importantes para System Design Interviews?",
                answer: `<table>
                    <thead><tr><th>Camada</th><th>Protocolo</th><th>Responsabilidade</th></tr></thead>
                    <tbody>
                        <tr><td><strong>Layer 3 (Network)</strong></td><td>IP</td><td>Roteamento, endere√ßamento, entrega "best-effort"</td></tr>
                        <tr><td><strong>Layer 4 (Transport)</strong></td><td>TCP, UDP, QUIC</td><td>Comunica√ß√£o end-to-end, confiabilidade, ordena√ß√£o</td></tr>
                        <tr><td><strong>Layer 7 (Application)</strong></td><td>HTTP, DNS, WebSockets</td><td>Protocolos de aplica√ß√£o</td></tr>
                    </tbody>
                </table>
                <p>Layer 3 garante que pacotes cheguem, Layer 4 adiciona garantias sobre <em>como</em> chegam, Layer 7 define <em>o que</em> √© comunicado.</p>`
            },
            {
                category: "üîå TCP vs UDP",
                question: "Q3: Uma empresa de streaming de jogos est√° decidindo entre TCP e UDP. Qual voc√™ recomendaria?",
                answer: `<p><strong>UDP √© a escolha correta</strong> para streaming em tempo real:</p>
                <ol>
                    <li><strong>Lat√™ncia √© cr√≠tica</strong> - Milissegundos importam em jogos</li>
                    <li><strong>Perda de pacotes √© aceit√°vel</strong> - Frame perdido < atraso</li>
                    <li><strong>Sem overhead de handshake</strong></li>
                    <li><strong>Sem retransmiss√£o</strong> - N√£o faz sentido retransmitir frame antigo</li>
                </ol>
                <div class="alert"><div class="alert-title">‚ö†Ô∏è Cuidado</div><p>Para browsers, WebRTC seria necess√°rio (√∫nico UDP em browser).</p></div>`
            },
            {
                category: "üîå TCP vs UDP",
                question: "Q4: O que significa TCP ser 'connection-oriented'?",
                answer: `<p>TCP estabelece uma <strong>conex√£o dedicada</strong> via three-way handshake:</p>
                <pre><code>1. SYN     ‚Üí Cliente solicita conex√£o
2. SYN-ACK ‚Üí Servidor aceita
3. ACK     ‚Üí Cliente confirma</code></pre>
                <p><strong>Importa porque:</strong></p>
                <ul>
                    <li><strong>Ordena√ß√£o garantida</strong></li>
                    <li><strong>Confiabilidade</strong> (ACK + retransmiss√£o)</li>
                    <li><strong>Estado mantido</strong> durante sess√£o</li>
                    <li><strong>Controle de fluxo</strong></li>
                </ul>`
            },
            {
                category: "üîå TCP vs UDP",
                question: "Q5: Quais as principais diferen√ßas entre TCP e UDP?",
                answer: `<table>
                    <thead><tr><th>Feature</th><th>UDP</th><th>TCP</th></tr></thead>
                    <tbody>
                        <tr><td>Conex√£o</td><td>Connectionless</td><td>Connection-oriented</td></tr>
                        <tr><td>Confiabilidade</td><td>Best-effort</td><td>Entrega garantida</td></tr>
                        <tr><td>Ordena√ß√£o</td><td>Sem garantia</td><td>Mant√©m ordem</td></tr>
                        <tr><td>Header Size</td><td>8 bytes</td><td>20-60 bytes</td></tr>
                        <tr><td>Use Cases</td><td>Streaming, gaming, VoIP, DNS</td><td>Web, APIs, etc.</td></tr>
                    </tbody>
                </table>`
            },
            {
                category: "üåê Protocolos de Aplica√ß√£o",
                question: "Q6: Por que HTTP √© 'stateless' e por que isso √© bom?",
                answer: `<p><strong>Stateless</strong>: Cada requisi√ß√£o √© independente.</p>
                <p><strong>Benef√≠cios:</strong></p>
                <ol>
                    <li><strong>Escalabilidade horizontal</strong> - Qualquer servidor responde</li>
                    <li><strong>Simplicidade</strong> - Servidores como fun√ß√µes puras <code>f(request) ‚Üí response</code></li>
                    <li><strong>Resili√™ncia</strong> - Servidor cai, outro assume</li>
                    <li><strong>Load balancing f√°cilitado</strong> - Round-robin funciona</li>
                </ol>
                <p><strong>Princ√≠pio</strong>: Minimize estado no sistema. Menos estado = mais f√°cil escalar.</p>`
            },
            {
                category: "üåê Protocolos de Aplica√ß√£o",
                question: "Q7: API mobile precisa mostrar perfil, posts e amigos em uma tela. REST, GraphQL ou gRPC?",
                answer: `<p><strong>GraphQL √© a melhor escolha.</strong></p>
                <p><strong>Problema com REST:</strong></p>
                <ul>
                    <li><strong>Under-fetching</strong>: 3+ requests necess√°rios</li>
                    <li><strong>Over-fetching</strong>: Campos desnecess√°rios</li>
                    <li><strong>Lat√™ncia</strong>: Multiplos round-trips = UX ruim</li>
                </ul>
                <p><strong>GraphQL:</strong></p>
                <pre><code>query {
  user(id: "123") {
    name, avatar
    posts(limit: 5) { title }
    friends(limit: 10) { name }
  }
}</code></pre>
                <p>Uma request, exatamente os dados necess√°rios, menor payload.</p>`
            },
            {
                category: "üåê Protocolos de Aplica√ß√£o",
                question: "Q8: Por que gRPC n√£o √© recomendado para APIs p√∫blicas?",
                answer: `<p><strong>APIs internas (‚úÖ gRPC):</strong></p>
                <ul>
                    <li>Protocol Buffers ~10x mais eficientes</li>
                    <li>Tipagem forte (erros em compile-time)</li>
                    <li>Streaming bidirecional nativo</li>
                    <li>Voce controla ambos os lados</li>
                </ul>
                <p><strong>APIs externas (‚ùå Evitar):</strong></p>
                <ul>
                    <li>Protocolo bin√°rio - dif√≠cil debugar</li>
                    <li>Browsers n√£o suportam diretamente</li>
                    <li>REST + OpenAPI mais acess√≠vel</li>
                </ul>
                <pre><code>[Externos] --REST--> [API Gateway] --gRPC--> [Microservicos]</code></pre>`
            },
            {
                category: "üåê Protocolos de Aplica√ß√£o",
                question: "Q9: Diferen√ßa entre SSE e WebSockets? Quando usar cada?",
                answer: `<table>
                    <thead><tr><th>Aspecto</th><th>SSE</th><th>WebSockets</th></tr></thead>
                    <tbody>
                        <tr><td>Dire√ß√£o</td><td>Unidirecional (server‚Üíclient)</td><td>Bidirecional</td></tr>
                        <tr><td>Protocolo</td><td>HTTP</td><td>Protocolo pr√≥prio</td></tr>
                        <tr><td>Reconex√£o</td><td>Autom√°tica</td><td>Manual</td></tr>
                        <tr><td>Complexidade</td><td>Baixa</td><td>Alta</td></tr>
                    </tbody>
                </table>
                <p><strong>SSE</strong>: Notifica√ß√µes, feeds, pre√ßos de leil√£o</p>
                <p><strong>WebSockets</strong>: Chat, jogos multiplayer, colabora√ß√£o</p>
                <blockquote>"Launching into WebSocket without justifying is a great way to get thumbs down."</blockquote>`
            },
            {
                category: "üåê Protocolos de Aplica√ß√£o",
                question: "Q10: O que √© WebRTC e por que √© complexo?",
                answer: `<p><strong>WebRTC</strong>: Comunica√ß√£o <strong>peer-to-peer</strong> entre browsers.</p>
                <p><strong>Complexidade:</strong></p>
                <p>1. <strong>NAT Traversal</strong>:</p>
                <ul>
                    <li>STUN: "hole punching" para descobrir IP</li>
                    <li>TURN: Relay como fallback</li>
                </ul>
                <p>2. <strong>M√∫ltiplas etapas</strong>:</p>
                <pre><code>1. Conectar ao signaling server
2. Obter IP via STUN
3. Trocar info
4. Estabelecer P2P
5. (Fallback TURN)</code></pre>
                <p><strong>Usar para</strong>: ‚úÖ Video/Audio calls | ‚ùå Quase todo resto</p>`
            },
            {
                category: "‚öñÔ∏è Load Balancing",
                question: "Q11: Diferen√ßa entre client-side e server-side load balancing?",
                answer: `<p><strong>Client-Side</strong> (ex: Redis Cluster):</p>
                <pre><code>1. Cliente pergunta topologia
2. Cliente faz hash ‚Üí escolhe no
3. Conecta DIRETAMENTE</code></pre>
                <p>‚úÖ R√°pido | ‚ùå Cliente "inteligente"</p>
                <p><strong>Dedicated LB</strong> (ex: AWS ALB):</p>
                <pre><code>Client ‚Üí ALB ‚Üí Backend</code></pre>
                <p>‚úÖ Clientes simples, controle granular | ‚ùå Hop adicional</p>
                <p><strong>DNS como LB</strong>: Retorna IPs rotacionados, evita SPOF.</p>`
            },
            {
                category: "‚öñÔ∏è Load Balancing",
                question: "Q12: WebSockets para chat - L4 ou L7 load balancer?",
                answer: `<p><strong>L4 Load Balancer</strong> √© a escolha correta.</p>
                <table>
                    <thead><tr><th>L4</th><th>L7</th></tr></thead>
                    <tbody>
                        <tr><td>Opera no TCP/UDP</td><td>Opera no HTTP</td></tr>
                        <tr><td><strong>Mant√©m conex√£o persistente</strong></td><td>Termina e cria nova</td></tr>
                        <tr><td>M√≠nima inspe√ß√£o</td><td>Inspeciona conte√∫do</td></tr>
                        <tr><td>Ideal para stateful</td><td>Ideal para stateless</td></tr>
                    </tbody>
                </table>
                <p><strong>Algoritmo</strong>: Least Connections (evita ac√∫mulo)</p>`
            },
            {
                category: "‚öñÔ∏è Load Balancing",
                question: "Q13: O que s√£o health checks e por que s√£o essenciais?",
                answer: `<p><strong>Health Checks</strong>: Verificam se backends est√£o saud√°veis.</p>
                <pre><code>LB --[ping]--> Server
                      |
         OK ‚Üí recebe tr√°fego
         Erro ‚Üí removido (failover)</code></pre>
                <p><strong>Tipos</strong>: TCP, HTTP (status code), Custom (dependencias)</p>
                <p><strong>Essenciais porque</strong>:</p>
                <ol>
                    <li>Failover autom√°tico</li>
                    <li>Detec√ß√£o proativa</li>
                    <li>Graceful degradation</li>
                </ol>
                <p><strong>Config t√≠pica</strong>: 5-30s intervalo, 2-3 falhas threshold</p>`
            },
            {
                category: "üåç Regionaliza√ß√£o",
                question: "Q14: A velocidade da luz √© uma limita√ß√£o real?",
                answer: `<p><strong>Sim!</strong></p>
                <ul>
                    <li>Luz em fibra: ~200,000 km/s</li>
                    <li>NY ‚Üî Londres: ~5,600 km</li>
                    <li>Round-trip m√≠nimo: <strong>~56ms</strong></li>
                </ul>
                <pre><code>Local (<1ms): mesma cidade
Continental (~30ms): outro estado
Intercontinental (~80ms+): outro continente</code></pre>
                <p><strong>Solu√ß√µes</strong>:</p>
                <ol>
                    <li><strong>CDNs</strong>: Cache na edge</li>
                    <li><strong>Regional Partitioning</strong></li>
                    <li><strong>Data Locality</strong></li>
                </ol>`
            },
            {
                category: "üåç Regionaliza√ß√£o",
                question: "Q15: Como Regional Partitioning resolve lat√™ncia? (exemplo Uber)",
                answer: `<p><strong>Insight Uber</strong>: "Em Miami, nunca quero motorista de NY."</p>
                <pre><code>      [GLOBAL: accounts, payment]
                 |
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì            ‚Üì            ‚Üì
[NORTHEAST] [SOUTHEAST] [SOUTHWEST]
 NY drivers  MIA drivers  LA drivers
 Local DB    Local DB     Local DB</code></pre>
                <p><strong>Benef√≠cios</strong>:</p>
                <ol>
                    <li>Queries locais</li>
                    <li>Escala reduzida por regi√£o</li>
                    <li>Lat√™ncia m√≠nima (server + DB co-localizados)</li>
                    <li>Isolamento de falhas</li>
                </ol>`
            },
            {
                category: "üîß Tratamento de Falhas",
                question: "Q16: O que √© 'retry with exponential backoff' e por que jitter √© importante?",
                answer: `<p><strong>Exponential Backoff</strong>: Esperar progressivamente mais:</p>
                <pre><code>Falhou ‚Üí espera 1s
Falhou ‚Üí espera 2s
Falhou ‚Üí espera 4s...</code></pre>
                <p><strong>Sem jitter</strong> (problema):</p>
                <pre><code>1000 clientes falham
Todos esperam 1s
1000 retentam juntos ‚Üê THUNDERING HERD!</code></pre>
                <p><strong>Com jitter</strong>:</p>
                <pre><code>Cliente A: 0.8s | B: 1.3s | C: 0.9s
...distribu√≠dos no tempo</code></pre>
                <p><strong>F√≥rmula</strong>: <code>min(cap, base * 2^attempt) + random(0, jitter)</code></p>`
            },
            {
                category: "üîß Tratamento de Falhas",
                question: "Q17: O que √© idempot√™ncia e como implementar?",
                answer: `<p><strong>Idempot√™ncia</strong>: Opera√ß√£o executada N vezes = mesmo resultado.</p>
                <p><strong>Sem idempot√™ncia</strong>:</p>
                <pre><code>POST /payment $10 ‚Üí Cobrou
[timeout]
POST /payment $10 ‚Üí Cobrou DE NOVO! Total: $20</code></pre>
                <p><strong>Com Idempotency Key</strong>:</p>
                <pre><code>POST /payment
Idempotency-Key: user123-order456
{amount: $10}</code></pre>
                <p><strong>Servidor</strong>: Verifica key no cache, retorna resultado anterior se existir.</p>
                <p><strong>Naturalmente idempotentes</strong>: GET, PUT, DELETE</p>
                <p><strong>Cuidado</strong>: POST, PATCH (incrementos)</p>`
            },
            {
                category: "üîß Tratamento de Falhas",
                question: "Q18: O que √© Circuit Breaker e como previne falhas em cascata?",
                answer: `<p><strong>Circuit Breaker</strong>: Protege quando depend√™ncias falhamencias falham.</p>
                <pre><code>       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ CLOSED  ‚îÇ ‚Üê Normal
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    falhas > threshold
            ‚Üì
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ  OPEN   ‚îÇ ‚Üê Fail fast
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    timeout expira
            ‚Üì
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇHALF-OPEN‚îÇ ‚Üê Testa 1 request
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    sucesso ‚Üí CLOSED
    falha   ‚Üí OPEN</code></pre>
                <p><strong>Benef√≠cios</strong>: Fail fast, reduz carga, self-healing, isolamento.</p>`
            },
            {
                category: "üîß Tratamento de Falhas",
                question: "Q19: O que √© 'thundering herd' e como prevenir?",
                answer: `<p><strong>Thundering Herd</strong>: Muitos clientes atacam recurso rec√©m-dispon√≠vel.</p>
                <pre><code>1. DB cai
2. 10,000 requests esperando
3. DB sobe (1 inst√¢ncia)
4. 10,000 ATACAM
5. Inst√¢ncia cai
6. GOTO 3 (loop de morte)</code></pre>
                <p><strong>Circuit Breaker ajuda</strong>:</p>
                <pre><code>[10,000 clients] --X BLOCKED
[Apenas 1 teste passa]
[DB sobe com calma]
[Teste OK ‚Üí tr√°fego liberado]</code></pre>
                <p><strong>Complementos</strong>: Jitter, rate limiting, gradual ramp-up, bulkhead.</p>`
            },
            {
                category: "üéØ Cen√°rio Senior",
                question: "Q20: Como arquitetar notifica√ß√µes em tempo real do Facebook (rea√ß√µes em lives)?",
                answer: `<p><strong>Requisitos</strong>: Milh√µes simult√¢neos, fire-and-forget, tempo real.</p>
                <pre><code>[VIEWERS: Browser/SSE, App/UDP]
            ‚Üì
    [L7 LOAD BALANCER]
            ‚Üì
  [NOTIFICATION SERVERS]
  - Batching por live_id (100ms)
  - Comprime: "‚ù§Ô∏èx5000, üòÇx2000"
            ‚Üì
     [KAFKA por live_id]
            ‚Üì
   [REACTION INGESTION]</code></pre>
                <p><strong>Decis√µes</strong>:</p>
                <ul>
                    <li>Dual protocol: UDP (apps) + HTTP (browsers)</li>
                    <li>SSE para push (n√£o WebSocket)</li>
                    <li>Batching agressivo</li>
                    <li>Regional partitioning</li>
                </ul>`
            },
            {
                category: "üéØ Cen√°rio Senior",
                question: "Q21: O que acontece quando voc√™ digita google.com e pressiona Enter?",
                answer: `<pre><code>1. DNS: "Qual IP de google.com?" ‚Üí 142.250.80.46

2. TCP HANDSHAKE:
   SYN ‚Üí SYN-ACK ‚Üí ACK

3. TLS HANDSHAKE:
   Certificados + cipher + chaves

4. HTTP REQUEST:
   GET / HTTP/1.1

5. SERVER PROCESSING ‚Üê √önica parte que SWEs controlam!

6. HTTP RESPONSE:
   200 OK + HTML

7. RENDERING:
   Parse HTML ‚Üí CSS/JS/images ‚Üí render

8. TCP TEARDOWN:
   FIN ‚Üí ACK ‚Üí FIN ‚Üí ACK</code></pre>
                <p><strong>Camadas</strong>: L7 (HTTP/DNS/TLS), L4 (TCP), L3 (IP), L2/L1 (f√≠sico)</p>`
            }
        ];

        // State
        let currentIndex = 0;
        let cards = [...quizData];
        let correct = 0;
        let incorrect = 0;
        let answered = new Set();
        let incorrectCards = [];
        let isReviewingMissed = false;

        // DOM Elements
        const flashcardMode = document.getElementById('flashcardMode');
        const listMode = document.getElementById('listMode');
        const flashcard = document.getElementById('flashcard');
        const cardCategory = document.getElementById('cardCategory');
        const cardQuestion = document.getElementById('cardQuestion');
        const cardAnswer = document.getElementById('cardAnswer');
        const revealBtn = document.getElementById('revealBtn');
        const feedbackBtns = document.getElementById('feedbackBtns');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const currentIndexEl = document.getElementById('currentIndex');
        const totalCardsEl = document.getElementById('totalCards');
        const progressFill = document.getElementById('progressFillFlashcard');
        const correctCount = document.getElementById('correctCount');
        const incorrectCount = document.getElementById('incorrectCount');
        const remainingCount = document.getElementById('remainingCount');
        const completionScreen = document.getElementById('completionScreen');
        const filterText = document.getElementById('filterText');

        // Functions
        function updateCard() {
            const card = cards[currentIndex];
            cardCategory.textContent = card.category;
            cardQuestion.textContent = card.question;
            cardAnswer.innerHTML = card.answer;

            // Reset state
            cardAnswer.classList.remove('visible');
            revealBtn.classList.remove('hidden');
            feedbackBtns.classList.remove('visible');

            // Update progress
            currentIndexEl.textContent = currentIndex + 1;
            totalCardsEl.textContent = cards.length;
            progressFill.style.width = ((currentIndex + 1) / cards.length * 100) + '%';

            // Update nav buttons
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === cards.length - 1;

            // Update stats
            correctCount.textContent = correct;
            incorrectCount.textContent = incorrect;
            remainingCount.textContent = cards.length - answered.size;
        }

        function revealAnswer() {
            cardAnswer.classList.add('visible');
            revealBtn.classList.add('hidden');
            feedbackBtns.classList.add('visible');
        }

        function markKnew() {
            if (!answered.has(currentIndex)) {
                correct++;
                answered.add(currentIndex);
            }
            goNext();
        }

        function markDidntKnow() {
            if (!answered.has(currentIndex)) {
                incorrect++;
                answered.add(currentIndex);
                if (!isReviewingMissed) {
                    incorrectCards.push(cards[currentIndex]);
                }
            }
            goNext();
        }

        function goNext() {
            if (currentIndex < cards.length - 1) {
                currentIndex++;
                updateCard();
            } else if (answered.size === cards.length) {
                showCompletion();
            }
        }

        function goPrev() {
            if (currentIndex > 0) {
                currentIndex--;
                updateCard();
            }
        }

        function shuffle() {
            cards = [...cards].sort(() => Math.random() - 0.5);
            currentIndex = 0;
            answered.clear();
            correct = 0;
            incorrect = 0;
            incorrectCards = [];
            isReviewingMissed = false;
            completionScreen.classList.remove('visible');
            flashcard.style.display = 'flex';
            updateCard();
        }

        function reset() {
            cards = [...quizData];
            currentIndex = 0;
            answered.clear();
            correct = 0;
            incorrect = 0;
            incorrectCards = [];
            isReviewingMissed = false;
            filterText.textContent = `Todas (${quizData.length})`;
            completionScreen.classList.remove('visible');
            flashcard.style.display = 'flex';
            updateCard();
        }

        function showCompletion() {
            flashcard.style.display = 'none';
            feedbackBtns.classList.remove('visible');

            document.getElementById('finalCorrect').textContent = correct;
            document.getElementById('finalIncorrect').textContent = incorrect;
            const percentage = Math.round((correct / cards.length) * 100);
            document.getElementById('finalPercentage').textContent = percentage + '%';

            completionScreen.classList.add('visible');

            // Show/hide review missed button
            document.getElementById('reviewMissedBtn').style.display =
                incorrectCards.length > 0 ? 'inline-block' : 'none';
        }

        function reviewMissed() {
            if (incorrectCards.length === 0) return;

            cards = [...incorrectCards];
            incorrectCards = [];
            currentIndex = 0;
            answered.clear();
            correct = 0;
            incorrect = 0;
            isReviewingMissed = true;

            filterText.textContent = `Revis√£o (${cards.length})`;
            completionScreen.classList.remove('visible');
            flashcard.style.display = 'flex';
            updateCard();
        }

        function cycleFilter() {
            // Simple filter cycling: All -> Categories...
            // For now, just show all
            reset();
        }

        // Mode switching
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                const mode = btn.dataset.mode;
                if (mode === 'flashcard') {
                    flashcardMode.classList.add('active');
                    listMode.classList.remove('active');
                } else {
                    flashcardMode.classList.remove('active');
                    listMode.classList.add('active');
                }
            });
        });

        // Event listeners
        revealBtn.addEventListener('click', revealAnswer);
        document.getElementById('knewBtn').addEventListener('click', markKnew);
        document.getElementById('didntKnowBtn').addEventListener('click', markDidntKnow);
        prevBtn.addEventListener('click', goPrev);
        nextBtn.addEventListener('click', goNext);
        document.getElementById('shuffleBtn').addEventListener('click', shuffle);
        document.getElementById('resetBtn').addEventListener('click', reset);
        document.getElementById('filterBtn').addEventListener('click', cycleFilter);
        document.getElementById('restartBtn').addEventListener('click', reset);
        document.getElementById('reviewMissedBtn').addEventListener('click', reviewMissed);

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (flashcardMode.classList.contains('active')) {
                if (e.code === 'Space' && !cardAnswer.classList.contains('visible')) {
                    e.preventDefault();
                    revealAnswer();
                } else if (e.code === 'ArrowRight') {
                    goNext();
                } else if (e.code === 'ArrowLeft') {
                    goPrev();
                } else if (e.key === '1' && cardAnswer.classList.contains('visible')) {
                    markKnew();
                } else if (e.key === '2' && cardAnswer.classList.contains('visible')) {
                    markDidntKnow();
                }
            }
        });

        // List mode toggle
        document.querySelectorAll('.question-header').forEach(header => {
            header.addEventListener('click', () => {
                header.parentElement.classList.toggle('open');
            });
        });

        // Initialize
        updateCard();
    </script>
</body>
</html>
